import{a as n,s as M,S as P,l as b,j as h}from"./index-DxMnafi1.js";import{M as D}from"./MatchOverlay-COL8Z39Z.js";const T=()=>{const[o,d]=n.useState(!1),[r,f]=n.useState(null),[y,w]=n.useState({}),[S,j]=n.useState({}),i=()=>{const c=new URL(window.location.href).pathname.split("/").slice(-1)[0];return decodeURIComponent(c)},x=()=>new URLSearchParams(window.location.search).get("style")||"default";n.useEffect(()=>{R();const e=setInterval(l,3e4);return()=>clearInterval(e)},[]);const R=async()=>{try{await l(),d(!0)}catch(e){console.error("Error loading data:",e)}},l=async()=>{try{const c=await(await fetch("https://website-backend.w3champions.com/api/matches/ongoing")).json(),v=i(),t=M(c,v);if(f(t),t!=null&&t.teams){const g=t.teams.flatMap(a=>a.players.map(s=>s.battleTag)),O=await P(g);w(O||{});const E=g.map(async a=>{var m,p,u;const s=await b(a);return[a,{recentGames:((m=s==null?void 0:s.session)==null?void 0:m.form)||[],wins:((p=s==null?void 0:s.session)==null?void 0:p.wins)||0,losses:((u=s==null?void 0:s.session)==null?void 0:u.losses)||0}]}),G=await Promise.all(E),I=Object.fromEntries(G);j(I)}}catch(e){console.error("Error fetching ongoing games:",e)}};return h.jsxs("div",{style:{background:"transparent",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:[!o&&null,o&&!r&&null,o&&r&&h.jsx(D,{matchData:r,atGroups:y,sessionData:S,streamerTag:i(),matchStyle:x()})]})};export{T as default};
