import{r as m,l as R,j as s,P as es,d as T,m as as,i as ts,o as cs,t as F,C as ns}from"./index-C9u5mkJS.js";const W=[{id:1,name:"Human",icon:F.human},{id:2,name:"Orc",icon:F.orc},{id:4,name:"Night Elf",icon:F.elf},{id:8,name:"Undead",icon:F.undead},{id:0,name:"Random",icon:F.random}],Z={US:"United States",DE:"Germany",RU:"Russia",CN:"China",KR:"Korea",FR:"France",GB:"United Kingdom",PL:"Poland",BR:"Brazil",CA:"Canada",AU:"Australia",NL:"Netherlands",SE:"Sweden",ES:"Spain",IT:"Italy",UA:"Ukraine",CZ:"Czech Republic",AT:"Austria",BE:"Belgium",FI:"Finland",NO:"Norway",DK:"Denmark",CH:"Switzerland",PT:"Portugal",RO:"Romania",HU:"Hungary",GR:"Greece",SK:"Slovakia",BG:"Bulgaria",HR:"Croatia",RS:"Serbia",SI:"Slovenia",LT:"Lithuania",LV:"Latvia",EE:"Estonia",BY:"Belarus",KZ:"Kazakhstan",TW:"Taiwan",JP:"Japan",VN:"Vietnam",TH:"Thailand",PH:"Philippines",MY:"Malaysia",SG:"Singapore",ID:"Indonesia",IN:"India",PK:"Pakistan",TR:"Turkey",IL:"Israel",SA:"Saudi Arabia",AE:"UAE",EG:"Egypt",ZA:"South Africa",MX:"Mexico",AR:"Argentina",CL:"Chile",CO:"Colombia",PE:"Peru",VE:"Venezuela",NZ:"New Zealand"},rs=({leagueCounts:a,selectedLeague:l,onLeagueClick:i,filterLabels:n,isLoading:x})=>{const e=Object.values(a).reduce((t,c)=>t+c,0),r=Math.max(...Object.values(a),1);return x||e===0?s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"League Distribution"}),(n==null?void 0:n.length)>0&&s.jsx("div",{className:"stats-card-meta",children:n.map((t,c)=>s.jsx("span",{className:"stats-card-filter",children:t},c))})]}),s.jsx("div",{className:"stats-loading",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]}):"No data"})]}):s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"League Distribution"}),s.jsxs("div",{className:"stats-card-meta",children:[n==null?void 0:n.map((t,c)=>s.jsx("span",{className:"stats-card-filter",children:t},c)),s.jsxs("span",{className:"stats-card-subtitle",children:[e.toLocaleString()," players"]})]})]}),s.jsx("div",{className:"stats-bars",children:R.map(t=>{const c=a[t.id]||0,h=e>0?(c/e*100).toFixed(1):0,y=r>0?c/r*100:0,g=l===t.id;return s.jsxs("div",{className:`stats-row clickable ${g?"selected":""}`,onClick:()=>i(t.id),children:[s.jsxs("div",{className:"stats-label",children:[s.jsx("img",{src:t.icon,alt:"",className:"stats-icon"}),s.jsx("span",{className:"stats-item-name",children:t.name})]}),s.jsx("div",{className:"stats-bar-container",children:s.jsx("div",{className:`stats-bar league-${t.id}`,style:{width:`${y}%`}})}),s.jsxs("div",{className:"stats-values",children:[s.jsx("span",{className:"stats-count",children:c.toLocaleString()}),s.jsxs("span",{className:"stats-percent",children:[h,"%"]})]})]},t.id)})}),l!==null&&s.jsx("button",{className:"stats-clear-filter",onClick:()=>i(null),children:"Clear filter"})]})},ls=({raceCounts:a,selectedRace:l,onRaceClick:i,filterLabels:n,isLoading:x})=>{const e=Object.values(a).reduce((t,c)=>t+c,0),r=Math.max(...Object.values(a),1);return x||e===0?s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Race Distribution"}),n.length>0&&s.jsx("div",{className:"stats-card-meta",children:n.map((t,c)=>s.jsx("span",{className:"stats-card-filter",children:t},c))})]}),s.jsx("div",{className:"stats-loading",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]}):"No data"})]}):s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Race Distribution"}),s.jsxs("div",{className:"stats-card-meta",children:[n.map((t,c)=>s.jsx("span",{className:"stats-card-filter",children:t},c)),s.jsxs("span",{className:"stats-card-subtitle",children:[e.toLocaleString()," players"]})]})]}),s.jsx("div",{className:"stats-bars",children:W.map(t=>{const c=a[t.id]||0,h=e>0?(c/e*100).toFixed(1):0,y=r>0?c/r*100:0,g=l===t.id;return s.jsxs("div",{className:`stats-row clickable ${g?"selected":""}`,onClick:()=>i(t.id),children:[s.jsxs("div",{className:"stats-label",children:[s.jsx("img",{src:t.icon,alt:"",className:"stats-icon race-icon"}),s.jsx("span",{className:"stats-item-name",children:t.name})]}),s.jsx("div",{className:"stats-bar-container",children:s.jsx("div",{className:`stats-bar race-${t.id}`,style:{width:`${y}%`}})}),s.jsxs("div",{className:"stats-values",children:[s.jsx("span",{className:"stats-count",children:c.toLocaleString()}),s.jsxs("span",{className:"stats-percent",children:[h,"%"]})]})]},t.id)})}),l!==null&&s.jsx("button",{className:"stats-clear-filter",onClick:()=>i(null),children:"Clear filter"})]})},is=({countryCounts:a,selectedCountry:l,onCountryClick:i,filterLabels:n,isLoading:x})=>{const e=m.useMemo(()=>Object.entries(a).filter(([c,h])=>h>0).sort((c,h)=>h[1]-c[1]).slice(0,10),[a]),r=e.reduce((c,[h,y])=>c+y,0),t=e.length>0?e[0][1]:1;return x||e.length===0?s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Top Countries"}),n.length>0&&s.jsx("div",{className:"stats-card-meta",children:n.map((c,h)=>s.jsx("span",{className:"stats-card-filter",children:c},h))})]}),s.jsx("div",{className:"stats-loading",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]}):"No data"})]}):s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Top Countries"}),s.jsxs("div",{className:"stats-card-meta",children:[n.map((c,h)=>s.jsx("span",{className:"stats-card-filter",children:c},h)),s.jsxs("span",{className:"stats-card-subtitle",children:[r.toLocaleString()," players"]})]})]}),s.jsx("div",{className:"stats-bars",children:e.map(([c,h])=>{const y=r>0?(h/r*100).toFixed(1):0,g=t>0?h/t*100:0,o=Z[c]||c,j=l===c;return s.jsxs("div",{className:`stats-row clickable ${j?"selected":""}`,onClick:()=>i(c),children:[s.jsxs("div",{className:"stats-label",children:[s.jsx(ns,{name:c.toLowerCase(),className:"stats-flag"}),s.jsx("span",{className:"stats-item-name",children:o})]}),s.jsx("div",{className:"stats-bar-container",children:s.jsx("div",{className:"stats-bar country-bar",style:{width:`${g}%`}})}),s.jsxs("div",{className:"stats-values",children:[s.jsx("span",{className:"stats-count",children:h.toLocaleString()}),s.jsxs("span",{className:"stats-percent",children:[y,"%"]})]})]},c)})}),l!==null&&s.jsx("button",{className:"stats-clear-filter",onClick:()=>i(null),children:"Clear filter"})]})},ds=({mmrData:a,isLoading:l})=>{var b,w,P,E,U,G;if(l||!((b=a==null?void 0:a.distributedMmrs)!=null&&b.length))return s.jsxs("div",{className:"stats-card",children:[s.jsx("div",{className:"stats-card-header",children:s.jsx("h2",{className:"stats-card-title",children:"MMR Distribution"})}),s.jsx("div",{className:"stats-loading",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]}):"No data"})]});const{distributedMmrs:i,top2PercentIndex:n,top5PercentIndex:x,top10PercentIndex:e,top25PercentIndex:r,top50PercentIndex:t}=a,c=Math.max(...i.map(L=>L.count)),h=i.reduce((L,$)=>L+$.count,0),y=(w=i[n])==null?void 0:w.mmr,g=(P=i[x])==null?void 0:P.mmr,o=(E=i[e])==null?void 0:E.mmr,j=(U=i[r])==null?void 0:U.mmr,k=(G=i[t])==null?void 0:G.mmr;return s.jsxs("div",{className:"stats-card stats-card-wide",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"MMR Distribution"}),s.jsxs("span",{className:"stats-card-subtitle",children:[h.toLocaleString()," players"]})]}),s.jsxs("div",{className:"mmr-chart",children:[s.jsx("div",{className:"mmr-bars",children:i.map((L,$)=>{const D=c>0?L.count/c*100:0,O=$===n||$===x||$===e||$===r||$===t;return s.jsx("div",{className:`mmr-bar ${O?"percentile":""}`,style:{height:`${D}%`},title:`${L.mmr} MMR: ${L.count} players`},L.mmr)})}),s.jsxs("div",{className:"mmr-axis",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"1000"}),s.jsx("span",{children:"2000"}),s.jsx("span",{children:"3000+"})]})]}),s.jsxs("div",{className:"mmr-percentiles",children:[s.jsxs("div",{className:"mmr-percentile",children:[s.jsx("span",{className:"mmr-percentile-label",children:"Top 50%"}),s.jsxs("span",{className:"mmr-percentile-value",children:[k,"+"]})]}),s.jsxs("div",{className:"mmr-percentile",children:[s.jsx("span",{className:"mmr-percentile-label",children:"Top 25%"}),s.jsxs("span",{className:"mmr-percentile-value",children:[j,"+"]})]}),s.jsxs("div",{className:"mmr-percentile",children:[s.jsx("span",{className:"mmr-percentile-label",children:"Top 10%"}),s.jsxs("span",{className:"mmr-percentile-value",children:[o,"+"]})]}),s.jsxs("div",{className:"mmr-percentile",children:[s.jsx("span",{className:"mmr-percentile-label",children:"Top 5%"}),s.jsxs("span",{className:"mmr-percentile-value",children:[g,"+"]})]}),s.jsxs("div",{className:"mmr-percentile",children:[s.jsx("span",{className:"mmr-percentile-label",children:"Top 2%"}),s.jsxs("span",{className:"mmr-percentile-value",children:[y,"+"]})]})]})]})},os=({hoursData:a,isLoading:l})=>{const i=m.useMemo(()=>{if(!(a!=null&&a.length))return[];const e=a.find(t=>t.gameMode===4);if(!(e!=null&&e.timeslots))return[];const r={};return e.timeslots.forEach(t=>{const c=t.hours;r[c]=(r[c]||0)+t.games}),Array.from({length:24},(t,c)=>({hour:c,games:r[c]||0}))},[a]),n=Math.max(...i.map(e=>e.games),1),x=i.reduce((e,r)=>e+r.games,0);return l||i.length===0?s.jsxs("div",{className:"stats-card",children:[s.jsx("div",{className:"stats-card-header",children:s.jsx("h2",{className:"stats-card-title",children:"Popular Hours (UTC)"})}),s.jsx("div",{className:"stats-loading",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]}):"No data"})]}):s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Popular Hours (UTC)"}),s.jsxs("span",{className:"stats-card-subtitle",children:[x.toLocaleString()," games"]})]}),s.jsxs("div",{className:"hours-chart",children:[s.jsx("div",{className:"hours-bars",children:i.map(e=>{const r=n>0?e.games/n*100:0;return s.jsx("div",{className:"hours-bar",style:{height:`${r}%`},title:`${e.hour}:00 - ${e.games.toLocaleString()} games`},e.hour)})}),s.jsxs("div",{className:"hours-axis",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"6"}),s.jsx("span",{children:"12"}),s.jsx("span",{children:"18"}),s.jsx("span",{children:"24"})]})]})]})},ms=({lengthData:a,isLoading:l})=>{const i=m.useMemo(()=>{if(!(a!=null&&a.length))return[];const e=a.find(t=>t.gameMode===4);if(!(e!=null&&e.lengths))return[];const r={};return e.lengths.forEach(t=>{const c=Math.floor(t.seconds/60),h=Math.floor(c/5)*5;h<=60&&(r[h]=(r[h]||0)+t.games)}),Object.entries(r).map(([t,c])=>({minutes:parseInt(t),games:c})).sort((t,c)=>t.minutes-c.minutes)},[a]),n=Math.max(...i.map(e=>e.games),1),x=i.reduce((e,r)=>e+r.games,0);return l||i.length===0?s.jsxs("div",{className:"stats-card",children:[s.jsx("div",{className:"stats-card-header",children:s.jsx("h2",{className:"stats-card-title",children:"Game Length"})}),s.jsx("div",{className:"stats-loading",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]}):"No data"})]}):s.jsxs("div",{className:"stats-card",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Game Length"}),s.jsxs("span",{className:"stats-card-subtitle",children:[x.toLocaleString()," games"]})]}),s.jsxs("div",{className:"length-chart",children:[s.jsx("div",{className:"length-bars",children:i.map(e=>{const r=n>0?e.games/n*100:0;return s.jsx("div",{className:"length-bar",style:{height:`${r}%`},title:`${e.minutes}-${e.minutes+5} min: ${e.games.toLocaleString()} games`},e.minutes)})}),s.jsxs("div",{className:"length-axis",children:[s.jsx("span",{children:"0m"}),s.jsx("span",{children:"15m"}),s.jsx("span",{children:"30m"}),s.jsx("span",{children:"45m"}),s.jsx("span",{children:"60m"})]})]})]})},hs=a=>a?`/maps/${a.replace(/^\(\d\)/,"").replace(/ /g,"").replace(/'/g,"")}.png`:null,us=({mapData:a,selectedSeason:l,isLoading:i})=>{const n=m.useMemo(()=>{if(!(a!=null&&a.length))return[];const e=a.find(t=>t.season===l);if(!(e!=null&&e.matchesOnMapPerModes))return[];const r=e.matchesOnMapPerModes.find(t=>t.gameMode===4);return r!=null&&r.maps?r.maps.sort((t,c)=>c.count-t.count):[]},[a,l]);n.length>0&&n[0].count;const x=n.reduce((e,r)=>e+r.count,0);return i||n.length===0?s.jsxs("div",{className:"stats-card",children:[s.jsx("div",{className:"stats-card-header",children:s.jsx("h2",{className:"stats-card-title",children:"Map Popularity"})}),s.jsx("div",{className:"stats-loading",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]}):"No data"})]}):s.jsxs("div",{className:"stats-card stats-card-wide",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Map Popularity"}),s.jsxs("span",{className:"stats-card-subtitle",children:[n.length," maps · ",x.toLocaleString()," games"]})]}),s.jsx("div",{className:"map-grid",children:n.map((e,r)=>{const t=x>0?(e.count/x*100).toFixed(1):0,c=e.mapName||e.map.replace(/^\(\d\)/,"").replace(/^\d+/,"").trim(),h=hs(c);return s.jsxs("div",{className:"map-grid-item",children:[s.jsxs("div",{className:"map-grid-rank",children:["#",r+1]}),s.jsx("img",{src:h,alt:c,className:"map-grid-image",onError:y=>{y.target.style.opacity="0.3"}}),s.jsxs("div",{className:"map-grid-info",children:[s.jsx("span",{className:"map-grid-name",children:c}),s.jsxs("span",{className:"map-grid-stats",children:[e.count.toLocaleString()," · ",t,"%"]})]})]},e.map)})})]})},ps="https://4v4gg-chat-relay.fly.dev",xs=()=>{const[a,l]=m.useState(null),[i,n]=m.useState(null),[x,e]=m.useState(null);m.useEffect(()=>{const o=new Date().toISOString().slice(0,10);fetch(`${ps}/api/admin/messages/timeline/${o}`).then(j=>j.ok?j.json():null).then(j=>{if(!j){l([]);return}Array.isArray(j)?l(j):(l(j.buckets||[]),n(j.games||null))}).catch(()=>l([]))},[]);const r=m.useMemo(()=>!a||a.length===0?1:Math.max(...a.map(o=>o.count)),[a]),t=m.useMemo(()=>!a||a.length===0?0:a.reduce((o,j)=>o+j.count,0)/a.length,[a]),c=m.useMemo(()=>{if(!a||a.length===0)return null;const o=a.reduce((b,w)=>b+w.count,0),j=new Set;for(const b of a)if(b.names)for(const w of b.names.split(",")){const P=w.trim();P&&j.add(P)}let k=a[0];for(const b of a)b.count>k.count&&(k=b);return{totalMsgs:o,uniqueUsers:j.size,peakCount:k.count,peakTime:k.bucket}},[a]),h=m.useCallback(o=>{e(j=>j===o?null:o)},[]);if(!a||a.length===0)return s.jsxs("div",{className:"stats-card stats-card-wide",children:[s.jsx("div",{className:"stats-card-header",children:s.jsx("h2",{className:"stats-card-title",children:"Chat Activity"})}),s.jsx("div",{className:"stats-loading",children:"No data"})]});const y=a.map(o=>({...o,isSpike:o.count>=t*3&&o.count>=10})),g=[];return c&&(g.push(`${c.totalMsgs} messages`),g.push(`${c.uniqueUsers} players`),g.push(`peak ${c.peakCount} at ${c.peakTime} utc`)),i&&(i.totalGames>0&&g.push(`${i.totalGames} games`),i.peakConcurrent>0&&g.push(`${i.peakConcurrent} concurrent`)),s.jsxs("div",{className:"stats-card stats-card-wide",children:[s.jsxs("div",{className:"stats-card-header",children:[s.jsx("h2",{className:"stats-card-title",children:"Chat Activity"}),s.jsx("span",{className:"stats-card-subtitle",children:"Today (UTC)"})]}),s.jsx("div",{className:"chat-activity-spark",children:y.map(o=>{const j=Math.max(2,o.count/r*100),k=x===o.bucket;return s.jsx("div",{className:`chat-activity-bar-wrap${k?" chat-activity-bar-wrap--selected":""}`,onClick:()=>h(o.bucket),title:`${o.bucket} — ${o.count} msgs, ${o.users} users`,children:s.jsx("div",{className:`chat-activity-bar${o.isSpike?" chat-activity-bar--spike":""}`,style:{height:`${j}%`}})},o.bucket)})}),g.length>0&&s.jsx("div",{className:"chat-activity-chips",children:g.map((o,j)=>s.jsx("span",{className:"chat-activity-chip",children:o},j))})]})},V=a=>{const l=`statsPage:${a}`;return T.get(l)},js=()=>T.get("w3cStats"),gs=()=>{const a=js(),[l,i]=m.useState(null),[n,x]=m.useState(null),[e,r]=m.useState(null),[t,c]=m.useState(null),[h,y]=m.useState([]),[g,o]=m.useState({}),[j,k]=m.useState({}),[b,w]=m.useState(!0),[P,E]=m.useState(null),[U,G]=m.useState((a==null?void 0:a.hours)||null),[L,$]=m.useState((a==null?void 0:a.lengths)||null),[D,O]=m.useState((a==null?void 0:a.maps)||null),[B,H]=m.useState(!a);m.useEffect(()=>{(async()=>{try{const p=await as();if(p&&p.length>0){y(p);const u=p[0].id;i(u);const N=V(u);N&&(o(N.leagueData||{}),k(N.countries||{}),E(N.mmrData||null),w(!1))}}catch(p){console.error("Failed to fetch seasons:",p),i(24)}})()},[]),m.useEffect(()=>{(async()=>{H(!a);try{const[p,u,N]=await Promise.all([fetch("https://website-backend.w3champions.com/api/w3c-stats/popular-hours"),fetch("https://website-backend.w3champions.com/api/w3c-stats/games-lengths"),fetch("https://website-backend.w3champions.com/api/w3c-stats/matches-on-map")]),[v,C,f]=await Promise.all([p.json(),u.json(),N.json()]);G(v),$(C),O(f),T.set("w3cStats",{hours:v,lengths:C,maps:f},6e5)}catch(p){console.error("Failed to fetch W3C stats:",p)}finally{H(!1)}})()},[]),m.useEffect(()=>{if(l===null)return;(async()=>{const p=`mmrDist:${l}`,u=T.get(p);u&&E(u);try{const v=await(await fetch(`https://website-backend.w3champions.com/api/w3c-stats/mmr-distribution?season=${l}&gateWay=${ts}&gameMode=4`)).json();E(v),T.set(p,v,600*1e3)}catch(N){console.error("Failed to fetch MMR distribution:",N)}})()},[l]),m.useEffect(()=>{if(l===null)return;const d=`statsPage:${l}`;(async()=>{const u=V(l);u?(o(u.leagueData||{}),k(u.countries||{}),w(!1)):w(!0);const N={};try{const v=R.map(async S=>{const M=await cs(S.id,l);return{id:S.id,players:Array.isArray(M)?M:[]}});(await Promise.all(v)).forEach(({id:S,players:M})=>{N[S]=M}),o(N);const f={};Object.values(N).flat().forEach(S=>{var A,I;const M=(I=(A=S.playersInfo)==null?void 0:A[0])==null?void 0:I.location;M&&(f[M]=(f[M]||0)+1)}),k(f),T.set(d,{leagueData:N,countries:f,mmrData:P},300*1e3)}catch(v){console.error("Failed to fetch league data:",v)}finally{w(!1)}})()},[l]);const K=(d,{skipLeague:p,skipRace:u,skipCountry:N}={})=>{var f,S,M,A,I;const v=((f=d.player)==null?void 0:f.race)??((M=(S=d.playersInfo)==null?void 0:S[0])==null?void 0:M.calculatedRace),C=(I=(A=d.playersInfo)==null?void 0:A[0])==null?void 0:I.location;return!(!u&&e!==null&&v!==e||!N&&t!==null&&C!==t)},_=m.useMemo(()=>{const d={};return R.forEach(p=>{const u=g[p.id]||[];d[p.id]=u.filter(N=>K(N,{skipLeague:!0})).length}),d},[g,e,t]),Y=m.useMemo(()=>{const d={0:0,1:0,2:0,4:0,8:0};return(n!==null?[n]:R.map(u=>u.id)).forEach(u=>{(g[u]||[]).forEach(v=>{var f,S,M;if(!K(v,{skipRace:!0}))return;const C=((f=v.player)==null?void 0:f.race)??((M=(S=v.playersInfo)==null?void 0:S[0])==null?void 0:M.calculatedRace);C!==void 0&&d.hasOwnProperty(C)&&d[C]++})}),d},[g,n,t]),q=m.useMemo(()=>{const d={};return(n!==null?[n]:R.map(u=>u.id)).forEach(u=>{(g[u]||[]).forEach(v=>{var f,S;if(!K(v,{skipCountry:!0}))return;const C=(S=(f=v.playersInfo)==null?void 0:f[0])==null?void 0:S.location;C&&(d[C]=(d[C]||0)+1)})}),d},[g,n,e]),z=d=>{var u,N;const p=[];return d!=="league"&&n!==null&&p.push((u=R.find(v=>v.id===n))==null?void 0:u.name),d!=="race"&&e!==null&&p.push((N=W.find(v=>v.id===e))==null?void 0:N.name),d!=="country"&&t!==null&&p.push(Z[t]||t),p.filter(Boolean)},J=d=>{i(parseInt(d.target.value,10)),x(null),r(null),c(null)},X=d=>{x(n===d?null:d)},Q=d=>{r(e===d?null:d)},ss=d=>{c(t===d?null:d)};return s.jsxs(es,{maxWidth:"1400px",header:s.jsxs("div",{className:"stats-header",children:[s.jsx("h1",{className:"stats-title",children:"4v4 Statistics"}),s.jsx("div",{className:"stats-controls",children:s.jsx("div",{className:"season-selector",children:s.jsx("select",{id:"season-select",value:l||"",onChange:J,children:h.map(d=>s.jsxs("option",{value:d.id,children:["S",d.id]},d.id))})})})]}),children:[s.jsxs("div",{className:"stats-grid",children:[s.jsx(rs,{leagueCounts:_,selectedLeague:n,onLeagueClick:X,filterLabels:z("league"),isLoading:b}),s.jsx(ls,{raceCounts:Y,selectedRace:e,onRaceClick:Q,filterLabels:z("race"),isLoading:b}),s.jsx(is,{countryCounts:q,selectedCountry:t,onCountryClick:ss,filterLabels:z("country"),isLoading:b})]}),s.jsxs("div",{className:"stats-grid two-col",style:{marginTop:"var(--space-4)"},children:[s.jsx(ds,{mmrData:P,isLoading:!P}),s.jsx(us,{mapData:D,selectedSeason:l,isLoading:B})]}),s.jsxs("div",{className:"stats-grid two-col",style:{marginTop:"var(--space-4)"},children:[s.jsx(os,{hoursData:U,isLoading:B}),s.jsx(ms,{lengthData:L,isLoading:B})]}),s.jsx("div",{className:"stats-grid two-col",style:{marginTop:"var(--space-4)"},children:s.jsx(xs,{})})]})};export{gs as default};
