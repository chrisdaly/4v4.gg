import{u as Ds,n as Ts,o as ks,p as $s,j as s,r as js,L as rs,a as O,m as Is,q as Cs,i as ts,f as Rs,k as Ls,s as As,b as Ps,C as Es,F as Us,O as Gs,t as Ws,g as Os}from"./index-nDK_ViPy.js";import{G as _s}from"./index-Ntay8lko.js";/* empty css                 *//* empty css                */const Fs=({game:C,playerBattleTag:m,showAllies:b=!0,linkTo:q,striped:ss=!1,className:j=""})=>{var o,$;const M=Ds();if(!C)return null;const L=C.match||C,_=m==null?void 0:m.toLowerCase();let k=null,B=[],F=[];for(const l of L.teams||[]){const w=(o=l.players)==null?void 0:o.find(N=>{var I;return((I=N.battleTag)==null?void 0:I.toLowerCase())===_});w?(k=w,B=l.players.filter(N=>{var I;return((I=N.battleTag)==null?void 0:I.toLowerCase())!==_})):F=l.players||[]}if(!k)return null;const z=k.won===!0||k.won===1,K=(k.currentMmr||0)-(k.oldMmr||0),S=(($=L.mapName)==null?void 0:$.replace(/^\(\d\)\s*/,""))||"Unknown",U=Ts(L.mapName),J=ks(L.durationInSeconds),G=$s(L.endTime),Q=(L.teams||[]).flatMap(l=>l.players||[]),V=Q.length>0?Math.round(Q.reduce((l,w)=>l+(w.oldMmr||0),0)/Q.length):null,Z=L.id||C.id,c=q||(Z?`/match/${Z}`:null),r=["game-row",z?"gr-won":"gr-lost",ss&&"gr-striped",j].filter(Boolean).join(" "),x=s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"gr-col gr-result",children:s.jsx("span",{className:`gr-badge ${z?"gr-badge-won":"gr-badge-lost"}`,children:z?"W":"L"})}),s.jsxs("div",{className:"gr-col gr-map",children:[U&&s.jsx("img",{src:U,alt:S,className:"gr-map-img"}),s.jsx("span",{className:"gr-map-name",children:S})]}),s.jsx("div",{className:"gr-col gr-avg-mmr",children:V&&s.jsx("span",{className:"gr-avg-mmr-value",children:V})}),s.jsx("div",{className:"gr-col gr-mmr",children:s.jsxs("span",{className:`gr-mmr-change ${K>=0?"positive":"negative"}`,children:[K>=0?"+":"",K]})}),b&&s.jsx("div",{className:"gr-col gr-allies",children:s.jsx("div",{className:"gr-players-list",children:B.slice(0,3).map((l,w)=>s.jsxs("span",{className:"gr-player",onClick:N=>{N.preventDefault(),N.stopPropagation(),M.push(`/player/${encodeURIComponent(l.battleTag)}`)},children:[s.jsx("img",{src:js[l.race],alt:"",className:"gr-race"}),s.jsx("span",{className:"gr-player-name",children:l.name})]},w))})}),b&&s.jsx("div",{className:"gr-col gr-opponents",children:s.jsx("div",{className:"gr-players-list",children:F.slice(0,4).map((l,w)=>s.jsxs("span",{className:"gr-player",onClick:N=>{N.preventDefault(),N.stopPropagation(),M.push(`/player/${encodeURIComponent(l.battleTag)}`)},children:[s.jsx("img",{src:js[l.race],alt:"",className:"gr-race"}),s.jsx("span",{className:"gr-player-name",children:l.name})]},w))})}),s.jsx("div",{className:"gr-col gr-duration",children:J}),s.jsx("div",{className:"gr-col gr-time",children:G})]});return c?s.jsx(rs,{to:c,className:r,children:x}):s.jsx("div",{className:r,children:x})},Ks="activity-graph-",Hs=1800*1e3,zs=13,Vs=({battleTag:C,currentSeason:m,gateway:b=20})=>{const[q,ss]=O.useState({}),[j,M]=O.useState({}),[L,_]=O.useState(!0),[k,B]=O.useState(null),{weeks:F,monthLabels:z}=O.useMemo(()=>{const c=[],r=[],x=new Date;x.setHours(0,0,0,0);const o=new Date(x);o.setDate(o.getDate()-zs*7);const $=o.getDay(),l=$===0?-6:1-$;o.setDate(o.getDate()+l);let w=new Date(o),N=-1;for(;w<=x;){const I=[];w.getMonth()!==N&&(r.push({label:w.toLocaleDateString("en-US",{month:"short"}),weekIndex:c.length}),N=w.getMonth());for(let W=0;W<7;W++)I.push(new Date(w)),w.setDate(w.getDate()+1);c.push(I)}return{weeks:c,monthLabels:r}},[]),K=()=>`${Ks}${C}`,S=()=>{try{const c=localStorage.getItem(K());if(c){const{data:r,seasonRanges:x,timestamp:o}=JSON.parse(c);if(Date.now()-o<Hs)return{data:r,ranges:x,isValid:!0}}}catch{}return{data:null,ranges:null,isValid:!1}},U=(c,r)=>{try{localStorage.setItem(K(),JSON.stringify({data:c,seasonRanges:r,timestamp:Date.now()}))}catch{}};O.useEffect(()=>{C&&(async()=>{_(!0);const{data:r,ranges:x,isValid:o}=S();if(o&&r){ss(r),M(x||{}),_(!1);return}const $={},l={},w=new Date;w.setMonth(w.getMonth()-3);try{const W=(await(await fetch("https://website-backend.w3champions.com/api/ladder/seasons")).json()).filter(P=>P.id>=m-1&&P.id<=m);for(const P of W){P.startDate&&(l[P.id]={start:new Date(P.startDate),end:P.endDate?new Date(P.endDate):new Date});let ns=0;const ls=100;let os=!0;for(;os;){const ps=`https://website-backend.w3champions.com/api/matches/search?playerId=${encodeURIComponent(C)}&offset=${ns}&gameMode=4&season=${P.id}&gateway=${b}&pageSize=${ls}`,is=await fetch(ps);if(!is.ok)break;const cs=(await is.json()).matches||[];if(cs.length===0)break;for(const gs of cs){const es=new Date(gs.endTime);if(es<w){os=!1;break}const ds=es.toISOString().split("T")[0];$[ds]=($[ds]||0)+1}if(ns+=ls,ns>500)break}}ss($),M(l),U($,l)}catch(N){console.error("Error fetching activity:",N)}finally{_(!1)}})()},[C,m,b]);const J=c=>c?c===1?1:c<=3?2:c<=6?3:4:0,G=c=>{const r=j[m];return r?c>=r.start&&c<=r.end:!1},Q=c=>c.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),V=c=>z.some(r=>r.weekIndex===c),Z=O.useMemo(()=>Object.values(q).reduce((c,r)=>c+r,0),[q]);return L?s.jsxs("div",{className:"activity-graph-card",children:[s.jsx("div",{className:"ag-header",children:s.jsx("h3",{className:"ag-title",children:"Activity"})}),s.jsxs("div",{className:"ag-loading",children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("span",{className:"loader-text",children:"Loading"})]})]}):s.jsxs("div",{className:"activity-graph-card",children:[s.jsxs("div",{className:"ag-header",children:[s.jsx("h3",{className:"ag-title",children:"Activity"}),s.jsxs("span",{className:"ag-total",children:[Z," games"]})]}),s.jsxs("div",{className:"ag-month-row",children:[s.jsx("div",{className:"ag-day-label-spacer"}),F.map((c,r)=>{const x=z.find(o=>o.weekIndex===r);return s.jsx("div",{className:`ag-month-cell ${V(r)&&r>0?"ag-month-start":""}`,children:x?x.label:""},r)})]}),s.jsxs("div",{className:"ag-body",children:[s.jsxs("div",{className:"ag-day-labels",children:[s.jsx("span",{children:"M"}),s.jsx("span",{children:"T"}),s.jsx("span",{children:"W"}),s.jsx("span",{children:"T"}),s.jsx("span",{children:"F"}),s.jsx("span",{children:"S"}),s.jsx("span",{children:"S"})]}),s.jsx("div",{className:"ag-grid",children:F.map((c,r)=>s.jsx("div",{className:`ag-week ${V(r)&&r>0?"ag-month-start":""}`,children:c.map((x,o)=>{const $=x.toISOString().split("T")[0],l=q[$]||0,w=J(l),N=G(x),I=x>new Date;return s.jsx("div",{className:`ag-cell ag-l${w}${N?" ag-season":""}${I?" ag-future":""}`,onMouseEnter:W=>!I&&B({x:W.clientX,y:W.clientY,text:`${l} game${l!==1?"s":""} on ${Q(x)}`}),onMouseLeave:()=>B(null)},o)})},r))})]}),k&&s.jsx("div",{className:"ag-tooltip",style:{left:k.x+10,top:k.y-40},children:k.text})]})},ws=20,xs=3,Ms=(C,m)=>{const b=`playerPage:${C.toLowerCase()}:${m}`;return Rs.get(b)},Js=()=>{var us,Ns,fs,ys;const m=(()=>{const e=new URL(window.location.href);return decodeURIComponent(e.pathname.split("/").slice(-1)[0])})(),b=m.toLowerCase(),q=m.split("#")[0],[ss,j]=O.useReducer((e,a)=>({...e,...a}),{playerData:null,profilePic:null,country:null,twitchName:null,isStreaming:!1,streamInfo:null,matches:[],totalMatches:0,sessionGames:[],seasonMmrs:[],ongoingGame:null,ladderStanding:null,isLoading:!0,allyStats:[],worstAllyStats:[],mapStats:[],worstMapStats:[],nemesisStats:[],selectedSeason:null,availableSeasons:[],currentPage:0}),{playerData:M,profilePic:L,country:_,twitchName:k,isStreaming:B,streamInfo:F,matches:z,totalMatches:K,sessionGames:S,seasonMmrs:U,ongoingGame:J,ladderStanding:G,isLoading:Q,allyStats:V,worstAllyStats:Z,mapStats:c,worstMapStats:r,nemesisStats:x,selectedSeason:o,availableSeasons:$,currentPage:l}=ss,w=60,N=e=>{j({playerData:e.playerData,profilePic:e.profilePic,country:e.country,twitchName:e.twitchName,matches:e.matches||[],totalMatches:e.totalMatches||0,seasonMmrs:e.seasonMmrs||[],ladderStanding:e.ladderStanding,allyStats:e.allyStats||[],worstAllyStats:e.worstAllyStats||[],mapStats:e.mapStats||[],worstMapStats:e.worstMapStats||[],nemesisStats:e.nemesisStats||[],isLoading:!1})};O.useEffect(()=>{(async()=>{try{const a=await Os();if(a&&a.length>0){const n=a[0].id;j({availableSeasons:a,selectedSeason:n});const p=Ms(m,n);p&&N(p)}}catch(a){console.error("Failed to fetch seasons:",a),j({selectedSeason:24})}})()},[m]),O.useEffect(()=>{if(o===null)return;const e=Ms(m,o);e?N(e):j({playerData:null,profilePic:null,country:null,twitchName:null,isStreaming:!1,streamInfo:null,matches:[],totalMatches:0,sessionGames:[],seasonMmrs:[],ongoingGame:null,ladderStanding:null,allyStats:[],worstAllyStats:[],mapStats:[],worstMapStats:[],nemesisStats:[],currentPage:0,isLoading:!0}),I(),ls();const a=setInterval(ls,3e4);return()=>clearInterval(a)},[m,o]);const I=async()=>{j({isLoading:!0});try{const e=await Is(m),a=e==null?void 0:e.profilePicUrl,n=e==null?void 0:e.country,p=(e==null?void 0:e.twitch)||null,d={profilePic:a,country:n,twitchName:p};if(p){const E=await Cs(p);d.isStreaming=E.isLive,d.streamInfo=E.isLive?E:null}j(d);let i=null,u=0;const v=`https://website-backend.w3champions.com/api/players/${encodeURIComponent(m)}/game-mode-stats?gateway=${ts}&season=${o}`,D=await fetch(v);if(D.ok){const t=(await D.json()).find(h=>h.gameMode===4);t&&(i=t,u=(t.wins||0)+(t.losses||0),j({playerData:i,totalMatches:u}))}const R=await W(0,!0),T=await P(!0),A=await os(!0),g=await ps(!0);Rs.set(`playerPage:${b}:${o}`,{playerData:i,profilePic:a,country:n,twitchName:p,matches:R||[],totalMatches:u,seasonMmrs:T||[],ladderStanding:A,allyStats:(g==null?void 0:g.allyStats)||[],worstAllyStats:(g==null?void 0:g.worstAllyStats)||[],mapStats:(g==null?void 0:g.mapStats)||[],worstMapStats:(g==null?void 0:g.worstMapStats)||[],nemesisStats:(g==null?void 0:g.nemesisStats)||[]},300*1e3)}catch(e){console.error("Error loading player data:",e)}finally{j({isLoading:!1})}},W=async(e,a=!1)=>{const n=e*ws,p=`https://website-backend.w3champions.com/api/matches/search?playerId=${encodeURIComponent(m)}&offset=${n}&gameMode=4&season=${o}&gateway=${ts}&pageSize=${ws}`,d=await fetch(p);if(d.ok){const i=await d.json();if(i.matches&&(j({matches:i.matches}),e===0&&ns(i.matches),a))return i.matches}return a?[]:void 0},P=async(e=!1)=>{const a=await Ls(m,o);if(j({seasonMmrs:a}),e)return a},ns=e=>{var u;if(!e||e.length===0)return;const a=w*60*1e3,n=7200*1e3,p=[],d=new Date((u=e[0])==null?void 0:u.endTime);if(new Date-d>n)j({sessionGames:[]});else{for(let v=0;v<e.length;v++){const D=e[v];let R=null,T=!1;for(const A of D.teams){const g=A.players.find(E=>E.battleTag.toLowerCase()===b);if(g){R=g,T=g.won;break}}if(R){if(v>0&&new Date(e[v-1].endTime)-new Date(D.endTime)>a)break;p.push({...D,playerData:R,won:T})}}j({sessionGames:p})}},ls=async()=>{try{const a=await(await fetch("https://website-backend.w3champions.com/api/matches/ongoing")).json(),n=As(a,m);j({ongoingGame:n})}catch(e){console.error("Error fetching ongoing games:",e)}},os=async(e=!1)=>{try{const a=`https://website-backend.w3champions.com/api/ladder/search?gateWay=${ts}&searchFor=${encodeURIComponent(m.split("#")[0])}&gameMode=4&season=${o}`,n=await fetch(a);if(!n.ok)return e?null:void 0;const d=(await n.json()).find(h=>{var Y,f,y,hs,vs,Ss,bs;const X=(y=(f=(Y=h.playersInfo)==null?void 0:Y[0])==null?void 0:f.battleTag)==null?void 0:y.toLowerCase(),H=(bs=(Ss=(vs=(hs=h.player)==null?void 0:hs.playerIds)==null?void 0:vs[0])==null?void 0:Ss.battleTag)==null?void 0:bs.toLowerCase();return X===b||H===b});if(!d)return e?null:void 0;const i=d.league,u=Ps.find(h=>h.id===i),v=`https://website-backend.w3champions.com/api/ladder/${i}?gateWay=${ts}&gameMode=4&season=${o}`,D=await fetch(v);if(!D.ok)return e?null:void 0;const R=await D.json(),T=R.findIndex(h=>{var X,H,Y;return((Y=(H=(X=h.playersInfo)==null?void 0:X[0])==null?void 0:H.battleTag)==null?void 0:Y.toLowerCase())===b});if(T===-1)return e?null:void 0;const A=Math.max(0,T-2),g=Math.min(R.length,T+3),E=R.slice(A,g),t={league:u,leagueId:i,playerRank:d.rankNumber,playerIndex:T,neighbors:E,totalInLeague:R.length};if(j({ladderStanding:t}),e)return t}catch(a){return console.error("Error fetching ladder standing:",a),e?null:void 0}},ps=async(e=!1)=>{try{const a=`https://website-backend.w3champions.com/api/matches/search?playerId=${encodeURIComponent(m)}&offset=0&gameMode=4&season=${o}&gateway=${ts}&pageSize=100`,n=await fetch(a);if(!n.ok)return e?null:void 0;const p=await n.json();if(!p.matches||p.matches.length===0)return e?null:void 0;const d={},i={},u={};for(const t of p.matches){let h=null,X=null,H=!1;for(const f of t.teams){const y=f.players.find(hs=>hs.battleTag.toLowerCase()===b);y?(h=f,H=y.won):X=f}if(!h)continue;for(const f of h.players){if(f.battleTag.toLowerCase()===b)continue;const y=f.battleTag;d[y]||(d[y]={battleTag:y,name:f.name,wins:0,losses:0,total:0}),d[y].total+=1,H?d[y].wins+=1:d[y].losses+=1}if(X)for(const f of X.players){const y=f.battleTag;u[y]||(u[y]={battleTag:y,name:f.name,wins:0,losses:0,total:0}),u[y].total+=1,H?u[y].losses+=1:u[y].wins+=1}const Y=t.mapName;if(Y){const f=Y.replace(/^\(\d\)\s*/,"");i[f]||(i[f]={name:f,wins:0,losses:0,total:0}),i[f].total+=1,H?i[f].wins+=1:i[f].losses+=1}}const v=Object.values(d).filter(t=>t.total>=xs).map(t=>({...t,winRate:Math.round(t.wins/t.total*100)})),D=[...v].sort((t,h)=>h.winRate-t.winRate||h.total-t.total).slice(0,3),R=[...v].filter(t=>t.losses>0).sort((t,h)=>t.winRate-h.winRate||h.total-t.total).slice(0,3),T=Object.values(i).filter(t=>t.total>=xs).map(t=>({...t,winRate:Math.round(t.wins/t.total*100)})),A=[...T].sort((t,h)=>h.winRate-t.winRate||h.total-t.total).slice(0,5),g=[...T].filter(t=>t.losses>0).sort((t,h)=>t.winRate-h.winRate||h.total-t.total).slice(0,3),E=Object.values(u).filter(t=>t.total>=xs&&t.wins>0).map(t=>({...t,winRate:Math.round(t.wins/t.total*100)})).sort((t,h)=>h.wins-t.wins||h.winRate-t.winRate).slice(0,3);if(j({allyStats:D,worstAllyStats:R,mapStats:A,worstMapStats:g,nemesisStats:E}),e)return{allyStats:D,worstAllyStats:R,mapStats:A,worstMapStats:g,nemesisStats:E}}catch(a){return console.error("Error fetching statistics:",a),e?null:void 0}},is=e=>{j({selectedSeason:parseInt(e.target.value,10)})},ms=async e=>{var a;j({currentPage:e}),await W(e),window.scrollTo({top:((a=document.querySelector(".match-history-section"))==null?void 0:a.offsetTop)-100||0,behavior:"smooth"})};if(Q)return s.jsx("div",{className:"player-page",children:s.jsxs("div",{className:"player-loading",children:[s.jsx("div",{className:"loader-spinner lg"}),s.jsx("span",{className:"loader-text",children:"Loading player data"})]})});const cs=S.filter(e=>e.won).length,gs=S.length-cs,es=S.length>0?(((us=S[0].playerData)==null?void 0:us.currentMmr)||0)-(((Ns=S[S.length-1].playerData)==null?void 0:Ns.oldMmr)||0):0,ds=M&&M.wins+M.losses>0?Math.round(M.wins/(M.wins+M.losses)*100):0,as=Math.ceil(K/ws);return s.jsx("div",{className:"player-page",children:s.jsxs("div",{className:"player-container",children:[s.jsxs("header",{className:"player-header",children:[s.jsxs("div",{className:"player-header-left",children:[s.jsxs("div",{className:"hd-pic-wrapper",children:[L&&s.jsx("img",{src:L,alt:"",className:"hd-pic"}),_&&s.jsx(Es,{name:_.toLowerCase(),className:"hd-flag"})]}),s.jsxs("div",{className:"hd-info",children:[s.jsxs("div",{className:"hd-name-row",children:[s.jsx("span",{className:"hd-name",children:q}),J&&s.jsx(_s,{className:"in-game-icon",title:"In Game"}),B&&k&&s.jsx("a",{href:`https://twitch.tv/${k}`,target:"_blank",rel:"noopener noreferrer",className:"twitch-link",title:(F==null?void 0:F.title)||"Live on Twitch",children:s.jsx(Us,{className:"twitch-icon",style:{fill:"#9146ff"}})})]}),M&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hd-stats-row",children:[G&&s.jsxs("span",{className:"hd-rank",children:["#",G.playerRank]}),s.jsx("span",{className:"hd-mmr",children:M.mmr}),s.jsx("span",{className:"hd-mmr-label",children:"MMR"})]}),s.jsxs("div",{className:"hd-record-row",children:[s.jsxs("span",{className:"hd-wins",children:[M.wins,"W"]}),s.jsxs("span",{className:"hd-losses",children:["-",M.losses,"L"]}),s.jsx("span",{className:"hd-sep",children:"Â·"}),s.jsxs("span",{className:"hd-winrate",children:[ds,"%"]})]})]})]})]}),s.jsx("div",{className:"player-header-right",children:s.jsx("div",{className:"season-selector",children:s.jsx("select",{value:o||"",onChange:is,children:$.map(e=>s.jsxs("option",{value:e.id,children:["S",e.id]},e.id))})})})]}),s.jsxs("div",{className:"player-content",children:[s.jsxs("main",{className:"player-main",children:[J&&s.jsxs("section",{className:"live-game-section",children:[s.jsx("div",{className:"section-header",children:s.jsx("h2",{className:"section-title",children:"Live Game"})}),s.jsx(Gs,{ongoingGameData:J,compact:!0,streamerTag:m})]}),s.jsxs("section",{className:"match-history-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{className:"section-title",children:"Match History"}),s.jsxs("span",{className:"match-count",children:[K," games"]})]}),s.jsxs("div",{className:"match-history-table",children:[s.jsxs("div",{className:"mh-header",children:[s.jsx("div",{className:"mh-col result",children:"Result"}),s.jsx("div",{className:"mh-col map",children:"Map"}),s.jsx("div",{className:"mh-col avg-mmr",children:"Avg MMR"}),s.jsx("div",{className:"mh-col mmr",children:"+/-"}),s.jsx("div",{className:"mh-col allies",children:"Allies"}),s.jsx("div",{className:"mh-col opponents",children:"Opponents"}),s.jsx("div",{className:"mh-col duration",children:"Duration"}),s.jsx("div",{className:"mh-col time",children:"Time"})]}),z.map((e,a)=>s.jsx(Fs,{game:e,playerBattleTag:m,striped:a%2===1},e.id))]}),as>1&&s.jsxs("div",{className:"pagination",children:[s.jsx("button",{className:"page-btn",disabled:l===0,onClick:()=>ms(l-1),children:"Prev"}),s.jsx("div",{className:"page-numbers",children:[...Array(Math.min(5,as))].map((e,a)=>{let n;return as<=5||l<3?n=a:l>as-4?n=as-5+a:n=l-2+a,s.jsx("button",{className:`page-num ${l===n?"active":""}`,onClick:()=>ms(n),children:n+1},n)})}),s.jsx("button",{className:"page-btn",disabled:l>=as-1,onClick:()=>ms(l+1),children:"Next"})]})]})]}),s.jsxs("aside",{className:"player-sidebar",children:[G&&s.jsxs("div",{className:"ladder-standing",children:[s.jsxs("div",{className:"ls-header",children:[s.jsx("img",{src:(fs=G.league)==null?void 0:fs.icon,alt:"",className:"ls-league-icon"}),s.jsx("span",{className:"ls-league-name",children:(ys=G.league)==null?void 0:ys.name})]}),s.jsx("div",{className:"ls-list",children:G.neighbors.map(e=>{var p,d,i,u,v,D,R,T,A;const a=((i=(d=(p=e.playersInfo)==null?void 0:p[0])==null?void 0:d.battleTag)==null?void 0:i.toLowerCase())===b,n=(v=(u=e.playersInfo)==null?void 0:u[0])==null?void 0:v.battleTag;return s.jsxs(rs,{to:a?"#":`/player/${encodeURIComponent(n)}`,className:`ls-row ${a?"me":""}`,onClick:g=>a&&g.preventDefault(),children:[s.jsxs("span",{className:"ls-rank",children:["#",e.rankNumber]}),s.jsx("img",{src:js[(R=(D=e.playersInfo)==null?void 0:D[0])==null?void 0:R.calculatedRace],alt:"",className:"ls-race"}),s.jsx("span",{className:"ls-name",children:(T=e.player)==null?void 0:T.name}),s.jsx("span",{className:"ls-mmr",children:(A=e.player)==null?void 0:A.mmr})]},e.id)})})]}),S.length>0&&(()=>{const e=S[S.length-1],a=S[0],n=e!=null&&e.startTime?new Date(e.startTime):null,p=a!=null&&a.endTime?new Date(a.endTime):null;let d=null;if(n&&p){const i=p-n,u=Math.floor(i/(1e3*60*60)),v=Math.floor(i%(1e3*60*60)/(1e3*60));d=u>0?`${u}h ${v}m`:`${v}m`}return s.jsxs("div",{className:"session-card",children:[s.jsx("h3",{className:"sc-title",children:"Session Summary"}),s.jsxs("div",{className:"sc-stats",children:[s.jsxs("div",{className:"sc-stat",children:[s.jsx("span",{className:"sc-label",children:"Duration"}),s.jsx("span",{className:"sc-value",children:d||`${S.length} games`})]}),s.jsxs("div",{className:"sc-stat",children:[s.jsx("span",{className:"sc-label",children:"Record"}),s.jsxs("span",{className:"sc-value",children:[cs,"W-",gs,"L"]})]}),s.jsxs("div",{className:"sc-stat",children:[s.jsx("span",{className:"sc-label",children:"MMR"}),s.jsxs("span",{className:`sc-value ${es>=0?"positive":"negative"}`,children:[es>=0?"+":"",es]})]})]}),s.jsx("div",{className:"sc-form",children:s.jsx(Ws,{form:S.slice().reverse().map(i=>i.won),size:"medium"})})]})})(),U.length>2&&(()=>{const e=Math.min(...U),a=Math.max(...U),n=U[U.length-1],p=a-e,d=p>0?(n-e)/p*100:50;return s.jsxs("div",{className:"mmr-thermometer-card",children:[s.jsxs("h3",{className:"mtc-title",children:["Season ",o," MMR"]}),s.jsxs("div",{className:"mtc-bar",children:[s.jsx("div",{className:"mtc-bar-track",children:s.jsx("div",{className:"mtc-bar-marker",style:{left:`${d}%`}})}),s.jsxs("div",{className:"mtc-bar-labels",children:[s.jsxs("div",{className:"mtc-label-group",children:[s.jsx("span",{className:"mtc-value low",children:e}),s.jsx("span",{className:"mtc-label",children:"LOW"})]}),s.jsxs("div",{className:"mtc-label-group current",children:[s.jsx("span",{className:"mtc-value",children:n}),s.jsx("span",{className:"mtc-label",children:"CURRENT"})]}),s.jsxs("div",{className:"mtc-label-group",children:[s.jsx("span",{className:"mtc-value high",children:a}),s.jsx("span",{className:"mtc-label",children:"PEAK"})]})]})]})]})})(),s.jsx(Vs,{battleTag:m,currentSeason:o,gateway:ts}),V.length>0&&s.jsxs("div",{className:"best-allies-card",children:[s.jsx("h3",{className:"bac-title",children:"Best Allies"}),s.jsx("div",{className:"bac-list",children:V.map((e,a)=>s.jsxs(rs,{to:`/player/${encodeURIComponent(e.battleTag)}`,className:"bac-row",children:[s.jsxs("span",{className:"bac-rank",children:["#",a+1]}),s.jsx("span",{className:"bac-name",children:e.name}),s.jsxs("span",{className:"bac-stats",children:[s.jsxs("span",{className:"bac-winrate",children:[e.winRate,"%"]}),s.jsxs("span",{className:"bac-record",children:["(",e.wins,"W-",e.losses,"L)"]})]})]},e.battleTag))})]}),c.length>0&&s.jsxs("div",{className:"best-maps-card",children:[s.jsx("h3",{className:"bmc-title",children:"Best Maps"}),s.jsx("div",{className:"bmc-list",children:c.map((e,a)=>s.jsxs("div",{className:"bmc-row",children:[s.jsxs("span",{className:"bmc-rank",children:["#",a+1]}),s.jsx("span",{className:"bmc-name",children:e.name}),s.jsxs("span",{className:"bmc-stats",children:[s.jsxs("span",{className:"bmc-winrate",children:[e.winRate,"%"]}),s.jsxs("span",{className:"bmc-record",children:["(",e.wins,"W-",e.losses,"L)"]})]})]},e.name))})]}),Z.length>0&&s.jsxs("div",{className:"worst-allies-card",children:[s.jsx("h3",{className:"wac-title",children:"Worst Allies"}),s.jsx("div",{className:"wac-list",children:Z.map((e,a)=>s.jsxs(rs,{to:`/player/${encodeURIComponent(e.battleTag)}`,className:"wac-row",children:[s.jsxs("span",{className:"wac-rank",children:["#",a+1]}),s.jsx("span",{className:"wac-name",children:e.name}),s.jsxs("span",{className:"wac-stats",children:[s.jsxs("span",{className:"wac-winrate",children:[e.winRate,"%"]}),s.jsxs("span",{className:"wac-record",children:["(",e.wins,"W-",e.losses,"L)"]})]})]},e.battleTag))})]}),r.length>0&&s.jsxs("div",{className:"worst-maps-card",children:[s.jsx("h3",{className:"wmc-title",children:"Worst Maps"}),s.jsx("div",{className:"wmc-list",children:r.map((e,a)=>s.jsxs("div",{className:"wmc-row",children:[s.jsxs("span",{className:"wmc-rank",children:["#",a+1]}),s.jsx("span",{className:"wmc-name",children:e.name}),s.jsxs("span",{className:"wmc-stats",children:[s.jsxs("span",{className:"wmc-winrate",children:[e.winRate,"%"]}),s.jsxs("span",{className:"wmc-record",children:["(",e.wins,"W-",e.losses,"L)"]})]})]},e.name))})]}),x.length>0&&s.jsxs("div",{className:"nemesis-card",children:[s.jsx("h3",{className:"nc-title",children:"Nemesis"}),s.jsx("div",{className:"nc-list",children:x.map((e,a)=>{const n=e.total>0?Math.round(e.losses/e.total*100):0;return s.jsxs(rs,{to:`/player/${encodeURIComponent(e.battleTag)}`,className:"nc-row",children:[s.jsxs("span",{className:"nc-rank",children:["#",a+1]}),s.jsx("span",{className:"nc-name",children:e.name}),s.jsxs("span",{className:"nc-stats",children:[s.jsxs("span",{className:"nc-winrate",children:[n,"%"]}),s.jsxs("span",{className:"nc-record",children:["(",e.losses,"W-",e.wins,"L)"]})]})]},e.battleTag)})})]})]})]})]})})};export{Js as default};
