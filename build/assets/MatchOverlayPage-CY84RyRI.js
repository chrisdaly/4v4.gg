import{r as t,D,I as G,q as M,j as u}from"./index-2Vec-CD8.js";import{M as P}from"./MatchOverlay-B6doLT2B.js";import"./MmrComparison-BwiSrDl2.js";import"./formatters-C0HfR3L6.js";const A=()=>{const[a,h]=t.useState(!1),[r,f]=t.useState(null),[y,w]=t.useState({}),[S,v]=t.useState({});t.useEffect(()=>{document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"},[]);const i=()=>{const c=new URL(window.location.href).pathname.split("/").slice(-1)[0];return decodeURIComponent(c)},j=()=>new URLSearchParams(window.location.search).get("style")||"default";t.useEffect(()=>{x();const s=setInterval(l,3e4);return()=>clearInterval(s)},[]);const x=async()=>{try{await l(),h(!0)}catch(s){console.error("Error loading data:",s)}},l=async()=>{try{const c=await(await fetch("https://website-backend.w3champions.com/api/matches/ongoing")).json(),E=i(),n=D(c,E);if(f(n),n!=null&&n.teams){const m=n.teams.flatMap(o=>o.players.map(e=>e.battleTag)),R=await G(m);w(R||{});const I=m.map(async o=>{var g,p,d;const e=await M(o);return[o,{recentGames:((g=e==null?void 0:e.session)==null?void 0:g.form)||[],wins:((p=e==null?void 0:e.session)==null?void 0:p.wins)||0,losses:((d=e==null?void 0:e.session)==null?void 0:d.losses)||0}]}),O=await Promise.all(I),b=Object.fromEntries(O);v(b)}}catch(s){console.error("Error fetching ongoing games:",s)}};return u.jsxs("div",{style:{background:"transparent",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:[!a&&null,a&&!r&&null,a&&r&&u.jsx(P,{matchData:r,atGroups:y,sessionData:S,streamerTag:i(),matchStyle:j()})]})};export{A as default};
